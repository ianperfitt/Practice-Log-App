"use strict";(self.webpackChunkpracticelogs=self.webpackChunkpracticelogs||[]).push([[34],{9034:(Z,M,d)=>{d.r(M),d.d(M,{AuthModule:()=>ye,localStorageSyncReducer:()=>_});var j=d(9808),b=d(3075),t=d(5e3);let N=(()=>{class e{constructor(r){if(r)throw new Error("Core module should only be imported to the Root Module")}}return e.\u0275fac=function(r){return new(r||e)(t.LFG(e,12))},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[j.ez]]}),e})();var w=d(8864),p=d(5620),h=(()=>{return(e=h||(h={})).LOGIN="[AUTH] Login",e.SET_TOKEN="[AUTH] Set Token",e.CREATE_USER="[AUTH] Create User",e.LOGIN_ERROR="LOGIN_ERROR",e.REGISTER_ERROR="REGISTER_ERROR",e.REMOVE_LOGIN_ERROR="REMOVE_LOGIN_ERROR",h;var e})();const x=(0,p.PH)(h.SET_TOKEN,(0,p.Ky)()),U=(0,p.PH)(h.LOGIN_ERROR,(0,p.Ky)()),C=(0,p.PH)(h.REGISTER_ERROR,(0,p.Ky)()),I=(0,p.PH)(h.REMOVE_LOGIN_ERROR,(0,p.Ky)()),F=(0,p.ZF)("authState"),L=()=>(0,p.P1)(F,e=>e.error);var R=d(8682),S=d(3007),i=d(1271),u=d(9224),l=d(4106),E=d(7531),y=d(7423);function G(e,o){if(1&e&&(t.TgZ(0,"p",8),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.error," ")}}const H=function(){return["register"]};function Q(e,o){1&e&&(t.TgZ(0,"p",9),t._uU(1,"Create account"),t.qZA()),2&e&&t.Q6J("routerLink",t.DdM(1,H))}const V=function(){return[""]};function W(e,o){1&e&&(t.TgZ(0,"p",9),t._uU(1,"Sign In"),t.qZA()),2&e&&t.Q6J("routerLink",t.DdM(1,V))}let J=(()=>{class e{constructor(r){this.fb=r,this.error="",this.title="Login",this.submitEmitter=new t.vpe,this.form=this.fb.group({email:[""],password:[""]})}submit(){this.submitEmitter.emit(this.form.value)}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(b.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-auth-form"]],inputs:{error:"error",title:"title"},outputs:{submitEmitter:"submitEmitter"},decls:17,vars:6,consts:[["data-cy","auth-title"],[3,"formGroup","ngSubmit"],["class","error",4,"ngIf"],["type","text","matInput","","placeholder","Username","formControlName","email","data-cy","email"],["type","password","matInput","","placeholder","Password","formControlName","password","data-cy","password"],[1,"button"],["type","submit","mat-button","","data-cy","submit-login"],["class","link","routerLinkActive","router-link-active",3,"routerLink",4,"ngIf"],[1,"error"],["routerLinkActive","router-link-active",1,"link",3,"routerLink"]],template:function(r,c){1&r&&(t.TgZ(0,"mat-card")(1,"mat-card-title",0),t._uU(2),t.qZA(),t.TgZ(3,"mat-card-content")(4,"form",1),t.NdJ("ngSubmit",function(){return c.submit()}),t.YNc(5,G,2,1,"p",2),t.TgZ(6,"p")(7,"mat-form-field"),t._UZ(8,"input",3),t.qZA()(),t.TgZ(9,"p")(10,"mat-form-field"),t._UZ(11,"input",4),t.qZA()(),t.TgZ(12,"div",5)(13,"button",6),t._uU(14),t.qZA()(),t.YNc(15,Q,2,2,"p",7),t.YNc(16,W,2,2,"p",7),t.qZA()()()),2&r&&(t.xp6(2),t.Oqu(c.title),t.xp6(2),t.Q6J("formGroup",c.form),t.xp6(1),t.Q6J("ngIf",c.error),t.xp6(9),t.Oqu(c.title),t.xp6(1),t.Q6J("ngIf","Login"==c.title),t.xp6(1),t.Q6J("ngIf","Register"==c.title))},directives:[u.a8,u.n5,u.dn,b._Y,b.JL,b.sg,j.O5,l.KE,E.Nt,b.Fj,b.JJ,b.u,y.lW,S.Od,S.rH],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;margin:100px 0}.mat-form-field[_ngcontent-%COMP%]{width:100%;min-width:300px}mat-card-title[_ngcontent-%COMP%], mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:center}.error[_ngcontent-%COMP%]{padding:16px;width:300px;color:#fff;background-color:red}.button[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.link[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline}"]}),e})();const X=[{path:"",component:(()=>{class e{constructor(r,c,f,s){this.store=r,this.authService=c,this.router=f,this._snackBar=s,this.error$=this.store.select(L()),this.checkJWT(),this.getError()}submit(r){this.store.dispatch({type:h.LOGIN,payload:r})}getError(){this.error$.subscribe(r=>{r&&this._snackBar.open(r.message,"Error",{duration:2500}).afterDismissed().subscribe(()=>{this.store.dispatch({type:h.REMOVE_LOGIN_ERROR,payload:null})})})}checkJWT(){this.authService.isAuthenticated()&&this.router.navigate(["/practice-logs"])}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(p.yh),t.Y36(R.i),t.Y36(S.F0),t.Y36(i.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:1,vars:0,consts:[[3,"submitEmitter"]],template:function(r,c){1&r&&(t.TgZ(0,"app-auth-form",0),t.NdJ("submitEmitter",function(s){return c.submit(s)}),t.qZA())},directives:[J],styles:[""]}),e})()},{path:"register",component:(()=>{class e{constructor(r,c){this.store=r,this._snackBar=c,this.error$=this.store.select(L()),this.getError()}ngOnInit(){}submit(r){this.store.dispatch({type:h.CREATE_USER,payload:r})}getError(){this.error$.subscribe(r=>{r&&this._snackBar.open(r.message,"Error",{duration:2500})})}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(p.yh),t.Y36(i.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-register"]],decls:1,vars:0,consts:[["title","Register",3,"submitEmitter"]],template:function(r,c){1&r&&(t.TgZ(0,"app-auth-form",0),t.NdJ("submitEmitter",function(s){return c.submit(s)}),t.qZA())},directives:[J],styles:[""]}),e})()}];let q=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[S.Bz.forChild(X)],S.Bz]}),e})();var k=d(4999);const P="@ngrx/store/init",te=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/,re=(e,o)=>"string"==typeof o&&te.test(o)?new Date(o):o,ne=(e,o)=>o;function K(e,o){return o.reduce((r,c)=>{if("string"==typeof c||"number"==typeof c){const f=null==e?void 0:e[c];void 0!==f&&(r[c]=f)}else for(const f in c)Object.prototype.hasOwnProperty.call(c,f)&&(r[f]=K(e[f],c[f]));return r},{})}const ce=(e,o,r,c,f,s)=>{if(s)try{if(!0!==s(e))return}catch(n){if(n instanceof TypeError)return;throw n}o.forEach(n=>{let g,v,O,a=e[n];if("object"==typeof n){let m=Object.keys(n)[0];if(a=e[m],void 0!==a&&n[m]){if(n[m].serialize)a=n[m].serialize(a);else{let A;n[m].reduce?A=n[m]:n[m].filter&&(A=n[m].filter),A&&(a=K(a,A)),n[m].encrypt&&n[m].decrypt?"function"==typeof n[m].encrypt&&(O=n[m].encrypt):(n[m].encrypt||n[m].decrypt)&&console.error(`Either encrypt or decrypt function is not present on '${n[m]}' key object.`)}g=n[m].replacer,v=n[m].space}n=m}if(void 0!==a&&void 0!==r)try{O&&(a=O("string"==typeof a?a:JSON.stringify(a,g,v))),r.setItem(c(n),"string"==typeof a?a:JSON.stringify(a,g,v))}catch(m){console.warn("Unable to save state to localStorage:",m)}else if(void 0===a&&f&&void 0!==r)try{r.removeItem(c(n))}catch(m){console.warn(`Exception on removing/cleaning undefined '${n}' state`,m)}})},ae=(e,o,r)=>((r.type===P||"@ngrx/store/update-reducers"===r.type)&&o&&(e=k(e,o,{arrayMerge:(s,n,a)=>n})),e);function $(e,o,r,c,f,s,n){try{var a=e[s](n),g=a.value}catch(v){return void r(v)}a.done?o(g):Promise.resolve(g).then(c,f)}function z(e){return function(){var o=this,r=arguments;return new Promise(function(c,f){var s=e.apply(o,r);function n(g){$(s,c,f,n,a,"next",g)}function a(g){$(s,c,f,n,a,"throw",g)}n(void 0)})}}var T=d(4394),B=d(5577),le=d(4004),Y=d(8505),D=d(262);let fe=(()=>{class e{constructor(r,c,f){this.actions$=r,this.authService=c,this.router=f,this.loginUser$=(0,T.GW)(()=>this.actions$.pipe((0,T.l4)(h.LOGIN),(0,B.z)(s=>this.authService.login(s.payload).pipe((0,le.U)(n=>({type:h.SET_TOKEN,token:n.token})),(0,Y.b)(()=>this.router.navigate(["practice-logs"])),(0,D.K)(function(){var n=z(function*(a){return{type:h.LOGIN_ERROR,error:a.error}});return function(a){return n.apply(this,arguments)}}())))),{dispatch:!0}),this.createUser$=(0,T.GW)(()=>this.actions$.pipe((0,T.l4)(h.CREATE_USER),(0,B.z)(s=>this.authService.register(s.payload).pipe((0,Y.b)(()=>this.router.navigate(["login"])),(0,D.K)(function(){var n=z(function*(a){return{type:h.REGISTER_ERROR,error:a.error}});return function(a){return n.apply(this,arguments)}}())))),{dispatch:!0})}}return e.\u0275fac=function(r){return new(r||e)(t.LFG(T.eX),t.LFG(R.i),t.LFG(S.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();const me=(0,p.Lq)({token:"",error:null},(0,p.on)(x,(e,{token:o})=>Object.assign(Object.assign({},e),{token:o})),(0,p.on)(U,(e,{error:o})=>Object.assign(Object.assign({},e),{error:o})),(0,p.on)(C,(e,{error:o})=>Object.assign(Object.assign({},e),{error:o})),(0,p.on)(I,(e,{error:o})=>Object.assign(Object.assign({},e),{error:o})));function _(e){return(e=>o=>{(void 0===e.storage&&!e.checkStorageAvailability||e.checkStorageAvailability&&"undefined"!=typeof window)&&(e.storage=localStorage||window.localStorage),void 0===e.storageKeySerializer&&(e.storageKeySerializer=s=>s),void 0===e.restoreDates&&(e.restoreDates=!0);let r=e.mergeReducer;(void 0===r||"function"!=typeof r)&&(r=ae);const c=(e=>e.map(o=>{let r=o;if("object"==typeof o&&(r=Object.keys(o)[0]),"string"!=typeof r)throw new TypeError("localStorageSync Unknown Parameter Type: Expected type of string, got "+typeof r);return o}))(e.keys),f=e.rehydrate?((e,o,r,c)=>e.reduce((f,s)=>{let g,v,n=s,a=c?re:ne;if("object"==typeof n&&(n=Object.keys(n)[0],"function"==typeof s[n]?a=s[n]:(s[n].reviver&&(a=s[n].reviver),s[n].deserialize&&(g=s[n].deserialize)),s[n].encrypt&&s[n].decrypt?"function"==typeof s[n].encrypt&&"function"==typeof s[n].decrypt?v=s[n].decrypt:console.error(`Either encrypt or decrypt is not a function on '${s[n]}' key object.`):(s[n].encrypt||s[n].decrypt)&&console.error(`Either encrypt or decrypt function is not present on '${s[n]}' key object.`)),void 0!==o){let O=o.getItem(r(n));if(O){v&&(O=v(O));const m=new RegExp("{|\\[");let A=O;return("null"===O||"true"===O||"false"===O||m.test(O.charAt(0)))&&(A=JSON.parse(O,a)),Object.assign({},f,{[n]:g?g(A):A})}}return f},{}))(c,e.storage,e.storageKeySerializer,e.restoreDates):void 0;return function(s,n){let a;return a=n.type!==P||s?Object.assign({},s):o(s,n),a=r(a,f,n),a=o(a,n),n.type!==P&&ce(a,c,e.storage,e.storageKeySerializer,e.removeOnUndefined,e.syncCondition),a}})({keys:["token"]})(e)}const de=[_];let ye=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[j.ez,q,w.q,b.u5,b.UX,N,p.Aw.forFeature("authState",me,{metaReducers:de}),T.sQ.forFeature([fe])]]}),e})()},4999:Z=>{var M=function(u){return function d(i){return!!i&&"object"==typeof i}(u)&&!function j(i){var u=Object.prototype.toString.call(i);return"[object RegExp]"===u||"[object Date]"===u||function N(i){return i.$$typeof===t}(i)}(u)},t="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function p(i,u){return!1!==u.clone&&u.isMergeableObject(i)?R(function w(i){return Array.isArray(i)?[]:{}}(i),i,u):i}function h(i,u,l){return i.concat(u).map(function(E){return p(E,l)})}function C(i){return Object.keys(i).concat(function U(i){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(i).filter(function(u){return Object.propertyIsEnumerable.call(i,u)}):[]}(i))}function I(i,u){try{return u in i}catch(l){return!1}}function R(i,u,l){(l=l||{}).arrayMerge=l.arrayMerge||h,l.isMergeableObject=l.isMergeableObject||M,l.cloneUnlessOtherwiseSpecified=p;var E=Array.isArray(u);return E===Array.isArray(i)?E?l.arrayMerge(i,u,l):function L(i,u,l){var E={};return l.isMergeableObject(i)&&C(i).forEach(function(y){E[y]=p(i[y],l)}),C(u).forEach(function(y){(function F(i,u){return I(i,u)&&!(Object.hasOwnProperty.call(i,u)&&Object.propertyIsEnumerable.call(i,u))})(i,y)||(E[y]=I(i,y)&&l.isMergeableObject(u[y])?function x(i,u){if(!u.customMerge)return R;var l=u.customMerge(i);return"function"==typeof l?l:R}(y,l)(i[y],u[y],l):p(u[y],l))}),E}(i,u,l):p(u,l)}R.all=function(u,l){if(!Array.isArray(u))throw new Error("first argument should be an array");return u.reduce(function(E,y){return R(E,y,l)},{})},Z.exports=R}}]);
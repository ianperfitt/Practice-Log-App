"use strict";(self.webpackChunkpracticelogs=self.webpackChunkpracticelogs||[]).push([[552],{6552:(st,O,r)=>{r.r(O),r.d(O,{PracticeLogModule:()=>nt});var v=r(9808),L=r(3007),d=(()=>{return(e=d||(d={}))[e.View=0]="View",e[e.Delete=1]="Delete",d;var e})(),h=(()=>{return(e=h||(h={}))[e.Create=0]="Create",e[e.DeleteAll=1]="DeleteAll",h;var e})(),s=r(5620);const I=(0,s.ZF)("practiceLogState");var n=(()=>{return(e=n||(n={})).GET_PRACTICE_LOG_LIST="[Practice-Log] Get Practice-Log list",e.SET_PRACTICE_LOG_LIST="[Practice-Log] Set Practice-Log list",e.ADD_PRACTICE_LOG_API="[Practice-Log] Add Practice-Log (API)",e.ADD_PRACTICE_LOG_STATE="[Practice-Log] Add Practice-Log (STATE)",e.MODIFY_PRACTICE_LOG_API="[Practice-Log] Modify Practice-Log (API)",e.MODIFY_PRACTICE_LOG_STATE="[Practice-Log] Modify Practice-Log (STATE)",e.REMOVE_PRACTICE_LOG_API="[Practice-Log] Remove Practice-Log (API)",e.REMOVE_PRACTICE_LOG_STATE="[Practice-Log] Remove Practice-Log (STATE)",e.REMOVE_ALL_PRACTICE_LOG_API="[Practice-Log] Remove All Practice-Log (API)",e.REMOVE_ALL_PRACTICE_LOG_STATE="[Practice-Log] Remove ALL Practice-Log (STATE)",n;var e})();const b=(0,s.PH)(n.MODIFY_PRACTICE_LOG_STATE,(0,s.Ky)()),D=(0,s.PH)(n.ADD_PRACTICE_LOG_STATE,(0,s.Ky)()),U=(0,s.PH)(n.REMOVE_PRACTICE_LOG_STATE,(0,s.Ky)()),N=((0,s.PH)(n.GET_PRACTICE_LOG_LIST),(0,s.PH)(n.SET_PRACTICE_LOG_LIST,(0,s.Ky)())),M=(0,s.PH)(n.REMOVE_ALL_PRACTICE_LOG_STATE);var t=r(5e3),w=r(4594),y=r(7423),R=r(5245);let x=(()=>{class e{constructor(c){this.router=c,this.action=new t.vpe}ngOnInit(){}emitAction(c){this.action.emit(c)}logOut(){localStorage.removeItem("token"),this.router.navigateByUrl("/login").then()}}return e.\u0275fac=function(c){return new(c||e)(t.Y36(L.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-practice-log-command-bar"]],outputs:{action:"action"},decls:15,vars:0,consts:[["mat-raised-button","","color","primary","data-cy","create",3,"click"],["mat-raised-button","","color","warn","data-cy","delete-all",3,"click"],["mat-button","","color","danger","data-cy","logout",3,"click"]],template:function(c,o){1&c&&(t.TgZ(0,"p")(1,"mat-toolbar")(2,"button",0),t.NdJ("click",function(){return o.emitAction(0)}),t.TgZ(3,"mat-icon"),t._uU(4,"fiber_new"),t.qZA(),t._uU(5," Create "),t.qZA(),t._uU(6," \xa0 "),t.TgZ(7,"button",1),t.NdJ("click",function(){return o.emitAction(1)}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA(),t._uU(10," Delete All "),t.qZA(),t.TgZ(11,"button",2),t.NdJ("click",function(){return o.logOut()}),t.TgZ(12,"mat-icon"),t._uU(13,"logout"),t.qZA(),t._uU(14," logout "),t.qZA()()())},directives:[w.Ye,y.lW,R.Hw],encapsulation:2}),e})();var m=r(2781);function $(e,i){if(1&e&&(t.TgZ(0,"th",9),t._uU(1),t.qZA()),2&e){const c=t.oxw().$implicit;t.xp6(1),t.hij(" ",c.headerName," ")}}function J(e,i){if(1&e&&(t.TgZ(0,"td",10),t._uU(1),t.qZA()),2&e){const c=i.$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij(" ",c[o.fieldName]," ")}}function Y(e,i){1&e&&(t.ynx(0,7),t.YNc(1,$,2,1,"th",3),t.YNc(2,J,2,1,"td",8),t.BQk()),2&e&&t.Q6J("matColumnDef",i.$implicit.fieldName)}function B(e,i){1&e&&(t.TgZ(0,"th",9),t._uU(1," Actions "),t.qZA())}function V(e,i){if(1&e){const c=t.EpF();t.TgZ(0,"td",11)(1,"button",12),t.NdJ("click",function(){const a=t.CHM(c).$implicit;return t.oxw().selectPracticeLog(a,0)}),t.TgZ(2,"mat-icon"),t._uU(3,"pageview"),t.qZA(),t._uU(4," View "),t.qZA(),t._uU(5," \xa0 "),t.TgZ(6,"button",13),t.NdJ("click",function(){const a=t.CHM(c).$implicit;return t.oxw().selectPracticeLog(a,1)}),t.TgZ(7,"mat-icon"),t._uU(8,"delete"),t.qZA(),t._uU(9," Delete "),t.qZA()()}}function j(e,i){1&e&&t._UZ(0,"tr",14)}function K(e,i){1&e&&t._UZ(0,"tr",15)}let H=(()=>{class e{constructor(){this.headers=[],this.practiceLogs=[],this.practiceLog=new t.vpe,this.headerFields=[]}ngOnInit(){this.getHeaderFields()}getHeaderFields(){this.headerFields=this.headers.map(c=>c.fieldName),this.headerFields.push("actions")}selectPracticeLog(c,o){this.practiceLog.emit({practiceLog:c,action:o})}}return e.\u0275fac=function(c){return new(c||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-practice-log-list"]],inputs:{headers:"headers",practiceLogs:"practiceLogs"},outputs:{practiceLog:"practiceLog"},decls:7,vars:4,consts:[["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-cell","","data-cy","row",4,"matCellDef"],["mat-header-cell",""],["mat-cell","","data-cy","row"],["mat-cell",""],["mat-raised-button","","color","primary","data-cy","view",3,"click"],["mat-raised-button","","color","warn","data-cy","delete",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(c,o){1&c&&(t.TgZ(0,"table",0),t.YNc(1,Y,3,1,"ng-container",1),t.ynx(2,2),t.YNc(3,B,2,0,"th",3),t.YNc(4,V,10,0,"td",4),t.BQk(),t.YNc(5,j,1,0,"tr",5),t.YNc(6,K,1,0,"tr",6),t.qZA()),2&c&&(t.Q6J("dataSource",o.practiceLogs),t.xp6(1),t.Q6J("ngForOf",o.headers),t.xp6(4),t.Q6J("matHeaderRowDef",o.headerFields),t.xp6(1),t.Q6J("matRowDefColumns",o.headerFields))},directives:[m.BZ,v.sg,m.w1,m.fO,m.ge,m.Dz,m.ev,y.lW,R.Hw,m.as,m.XQ,m.nj,m.Gk],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),e})(),k=(()=>{class e{constructor(c,o){this.router=c,this.store=o,this.practiceLogs=[],this.practiceLogs$=this.store.select((0,s.P1)(I,e=>e.practiceLogs)),this.headers=[{headerName:"Instrument",fieldName:"instrument"},{headerName:"Key",fieldName:"key"},{headerName:"Tempo",fieldName:"tempo"},{headerName:"Description",fieldName:"description"}]}ngOnInit(){this.store.dispatch({type:n.GET_PRACTICE_LOG_LIST}),this.assignPracticeLogs()}assignPracticeLogs(){this.practiceLogs$.subscribe(c=>{this.practiceLogs=c})}selectPracticeLog(c){switch(c.action){case d.View:return void this.router.navigate(["practice-logs","form",c.practiceLog.id]);case d.Delete:return void this.store.dispatch({type:n.REMOVE_PRACTICE_LOG_API,payload:c.practiceLog.id})}}executeCommandBarAction(c){switch(c){case h.Create:return void this.router.navigate(["practice-logs","form"]);case h.DeleteAll:{const o=this.practiceLogs.map(l=>l.id);return void this.store.dispatch({type:n.REMOVE_ALL_PRACTICE_LOG_API,payload:o})}}}}return e.\u0275fac=function(c){return new(c||e)(t.Y36(L.F0),t.Y36(s.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list"]],decls:2,vars:2,consts:[[3,"action"],[3,"practiceLogs","headers","practiceLog"]],template:function(c,o){1&c&&(t.TgZ(0,"app-practice-log-command-bar",0),t.NdJ("action",function(a){return o.executeCommandBarAction(a)}),t.qZA(),t.TgZ(1,"app-practice-log-list",1),t.NdJ("practiceLog",function(a){return o.selectPracticeLog(a)}),t.qZA()),2&c&&(t.xp6(1),t.Q6J("practiceLogs",o.practiceLogs)("headers",o.headers))},directives:[x,H],styles:["button[_ngcontent-%COMP%]{margin-right:10px}"]}),e})();var u=r(3075),z=r(9224),Z=r(4106),Q=r(7531);let X=(()=>{class e{constructor(c){this.fb=c,this.selectedPracticeLog=null,this.actionButtonLabel="Create",this.action=new t.vpe,this.form=this.fb.group({id:[""],instrument:[""],key:[""],tempo:[""],description:[""]})}ngOnInit(){this.checkAction()}checkAction(){this.selectedPracticeLog&&(this.actionButtonLabel="Update",this.patchDataValues())}patchDataValues(){this.selectedPracticeLog&&this.form.patchValue(this.selectedPracticeLog)}emitAction(){this.action.emit({value:this.form.value,action:this.actionButtonLabel})}clear(){this.form.reset()}}return e.\u0275fac=function(c){return new(c||e)(t.Y36(u.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-practice-log-form"]],inputs:{selectedPracticeLog:"selectedPracticeLog",actionButtonLabel:"actionButtonLabel"},outputs:{action:"action"},decls:26,vars:3,consts:[[1,"form-card"],[1,"practice-log-form",3,"formGroup"],["appearance","fill",1,"example-full-width"],["matInput","","formControlName","instrument","placeholder","Ex. Guitar","data-cy","instrument"],["matInput","","formControlName","key","placeholder","Ex. C","data-cy","key"],["matInput","","formControlName","tempo","placeholder","Ex. 120 BPM","data-cy","tempo"],["matInput","","formControlName","description","placeholder","Ex. Play the scale in ascending order","data-cy","action"],[1,"button-group"],["mat-raised-button","","color","primary","data-cy","action",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(c,o){1&c&&(t.TgZ(0,"mat-card",0)(1,"h2"),t._uU(2),t.qZA(),t.TgZ(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),t._uU(6,"Instrument"),t.qZA(),t._UZ(7,"input",3),t.qZA(),t.TgZ(8,"mat-form-field",2)(9,"mat-label"),t._uU(10,"Key"),t.qZA(),t._UZ(11,"input",4),t.qZA(),t.TgZ(12,"mat-form-field",2)(13,"mat-label"),t._uU(14,"Tempo"),t.qZA(),t._UZ(15,"input",5),t.qZA(),t.TgZ(16,"mat-form-field",2)(17,"mat-label"),t._uU(18,"Description"),t.qZA(),t._UZ(19,"input",6),t.qZA(),t.TgZ(20,"div",7)(21,"button",8),t.NdJ("click",function(){return o.emitAction()}),t._uU(22),t.qZA(),t._uU(23," \xa0 "),t.TgZ(24,"button",9),t.NdJ("click",function(){return o.clear()}),t._uU(25," Clear "),t.qZA()()()()),2&c&&(t.xp6(2),t.Oqu(o.selectedPracticeLog?"Update/View Log":"Create Log"),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(19),t.hij(" ",o.actionButtonLabel," "))},directives:[z.a8,u._Y,u.JL,u.sg,Z.KE,Z.hX,Q.Nt,u.Fj,u.JJ,u.u,y.lW],styles:[".practice-log-form[_ngcontent-%COMP%]{min-width:500px;max-width:800px;width:100%}.example-full-width[_ngcontent-%COMP%]{width:100%}.form-card[_ngcontent-%COMP%]{min-width:500px;max-width:800px;margin:auto}.button-group[_ngcontent-%COMP%]{margin-bottom:15px}.button-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;float:right}"]}),e})(),G=(()=>{class e{constructor(c,o){this.router=c,this.store=o,this.practiceLog=null,this.practiceLog$=this.store.select((e=>(0,s.P1)(I,i=>i.practiceLogs.find(c=>c.id===e)))(this.router.snapshot.params.id)),this.practiceLog$.subscribe(a=>{a&&(this.practiceLog=a)})}canDeactivate(){return window.confirm("Are you sure?")}ngOnInit(){}formAction(c){switch(c.action){case"Create":return void this.store.dispatch({type:n.ADD_PRACTICE_LOG_API,payload:c.value});case"Update":return void this.store.dispatch({type:n.MODIFY_PRACTICE_LOG_API,payload:c.value})}}}return e.\u0275fac=function(c){return new(c||e)(t.Y36(L.gz),t.Y36(s.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-form"]],decls:1,vars:1,consts:[[3,"selectedPracticeLog","action"]],template:function(c,o){1&c&&(t.TgZ(0,"app-practice-log-form",0),t.NdJ("action",function(a){return o.formAction(a)}),t.qZA()),2&c&&t.Q6J("selectedPracticeLog",o.practiceLog)},directives:[X],styles:[""]}),e})();const q=[{path:"",component:k},{path:"form",children:[{path:"",component:G},{path:":id",component:G}]}];let W=(()=>{class e{}return e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[L.Bz.forChild(q)],L.Bz]}),e})();var tt=r(8864);const ct=(0,s.Lq)({practiceLogs:[]},(0,s.on)(N,(e,{practiceLogs:i})=>Object.assign(Object.assign({},e),{practiceLogs:i})),(0,s.on)(U,(e,{practiceLogId:i})=>Object.assign(Object.assign({},e),{practiceLogs:e.practiceLogs.filter(c=>c.id!=i)})),(0,s.on)(D,(e,{practiceLog:i})=>Object.assign(Object.assign({},e),{practiceLogs:[...e.practiceLogs,i]})),(0,s.on)(b,(e,{practiceLog:i})=>Object.assign(Object.assign({},e),{practiceLogs:e.practiceLogs.map(c=>c.id===i.id?i:c)})),(0,s.on)(M,e=>Object.assign(Object.assign({},e),{practiceLogs:[]})));var p=r(4394),P=r(5577),f=r(4004),g=r(262),C=r(515),_=r(8505),ot=r(4128),T=r(2843),A=r(2340),it=r(520);let at=(()=>{class e{constructor(c){this.http=c}getPracticeLogs(){return this.http.get(`${A.N.apiURL}/practice-logs`).pipe((0,_.b)(c=>c),(0,g.K)(c=>(0,T._)(()=>c)))}getPracticeLog(c){return this.http.get(`${A.N.apiURL}/practice-logs/${c}`).pipe((0,_.b)(o=>o),(0,g.K)(o=>(0,T._)(()=>o)))}addPracticeLog(c){return this.http.post(`${A.N.apiURL}/practice-logs`,c).pipe((0,_.b)(o=>o),(0,g.K)(o=>(0,T._)(()=>o)))}updatePracticeLog(c,o){return this.http.put(`${A.N.apiURL}/practice-logs/${c}`,o).pipe((0,g.K)(l=>(0,T._)(()=>l)))}deletePracticeLog(c){return this.http.delete(`${A.N.apiURL}/practice-logs/${c}`).pipe((0,g.K)(o=>(0,T._)(()=>o)))}}return e.\u0275fac=function(c){return new(c||e)(t.LFG(it.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),rt=(()=>{class e{constructor(c,o,l){this.actions$=c,this.practiceLogService=o,this.router=l,this.getPracticeLogs$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(n.GET_PRACTICE_LOG_LIST),(0,P.z)(()=>this.practiceLogService.getPracticeLogs().pipe((0,f.U)(a=>({type:n.SET_PRACTICE_LOG_LIST,practiceLogs:a})),(0,g.K)(()=>C.E)))),{dispatch:!0}),this.removePracticeLog$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(n.REMOVE_PRACTICE_LOG_API),(0,P.z)(a=>this.practiceLogService.deletePracticeLog(a.payload).pipe((0,f.U)(()=>({type:n.REMOVE_PRACTICE_LOG_STATE,practiceLogId:a.payload})),(0,g.K)(()=>C.E)))),{dispatch:!0}),this.addPracticeLog$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(n.ADD_PRACTICE_LOG_API),(0,P.z)(a=>this.practiceLogService.addPracticeLog(a.payload).pipe((0,f.U)(E=>({type:n.ADD_PRACTICE_LOG_STATE,practiceLog:a.payload})),(0,_.b)(()=>this.router.navigate(["practice-logs"])),(0,g.K)(()=>C.E)))),{dispatch:!0}),this.modifyPracticeLog$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(n.MODIFY_PRACTICE_LOG_API),(0,P.z)(a=>this.practiceLogService.updatePracticeLog(a.payload.id,a.payload).pipe((0,f.U)(E=>({type:n.MODIFY_PRACTICE_LOG_STATE,practiceLog:a.payload})),(0,_.b)(()=>this.router.navigate(["practice-logs"])),(0,g.K)(()=>C.E)))),{dispatch:!0}),this.removeAllPracticeLog$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(n.REMOVE_ALL_PRACTICE_LOG_API),(0,P.z)(a=>(0,ot.D)([...a.payload.map(E=>this.practiceLogService.deletePracticeLog(E))]).pipe((0,f.U)(()=>({type:n.REMOVE_ALL_PRACTICE_LOG_STATE})),(0,g.K)(()=>C.E)))),{dispatch:!0})}}return e.\u0275fac=function(c){return new(c||e)(t.LFG(p.eX),t.LFG(at),t.LFG(L.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),nt=(()=>{class e{}return e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[v.ez,W,tt.q,u.UX,s.Aw.forFeature("practiceLogState",ct),p.sQ.forFeature([rt])]]}),e})()}}]);